<!DOCTYPE html>
<!-- Template Name: Clip-One - Responsive Admin Template build with Twitter Bootstrap 3.x Version: 1.3 Author: ClipTheme -->
<!--[if IE 8]><html class="ie8 no-js" lang="en"><![endif]-->
<!--[if IE 9]><html class="ie9 no-js" lang="en"><![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<!-- start: HEAD -->

<head>
<title>Clip-One - Responsive Admin Template</title>
<!-- start: META -->
<meta charset="utf-8" />
<!--[if IE]><meta http-equiv='X-UA-Compatible' content="IE=edge,IE=9,IE=8,chrome=1" /><![endif]-->
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta content="" name="description" />
<meta content="" name="author" />
<!-- end: META -->
<!-- start: MAIN CSS -->
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="${base.contextPath}/assets/fonts/style.css">
<link rel="stylesheet" href="${base.contextPath}/assets/css/main.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/css/main-responsive.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/iCheck/skins/all.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/bootstrap-colorpalette/css/bootstrap-colorpalette.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/perfect-scrollbar/src/perfect-scrollbar.css">
<link rel="stylesheet"
	href="${base.contextPath}/assets/css/theme_light.css" type="text/css"
	id="skin_color">
<link rel="stylesheet" href="${base.contextPath}/assets/css/print.css"
	type="text/css" media="print" />
<!--[if IE 7]>
		<link rel="stylesheet" href="assets/plugins/font-awesome/css/font-awesome-ie7.min.css">
		<![endif]-->
<!-- end: MAIN CSS -->
<!-- start: CSS REQUIRED FOR THIS PAGE ONLY -->
<link rel="stylesheet" type="text/css"
	href="${base.contextPath}/assets/plugins/select2/select2.css" />
<link rel="stylesheet"
	href="${base.contextPath}/assets/plugins/DataTables/media/css/DT_bootstrap.css" />
<!-- end: CSS REQUIRED FOR THIS PAGE ONLY -->
<link rel="shortcut icon" href="favicon.ico" />
</head>

<body>
	<!-- end: HEADER -->
	<!-- start: MAIN CONTAINER -->
	<div class="main-container">
		<!-- start: PAGE -->
		<div class="main-content">

			<div class="container">
				<div class="row">
					<div class="col-md-12">
						<!-- start: DYNAMIC TABLE PANEL -->
						<div class="panel panel-default">
							<div class="panel-heading">
								<i class="fa fa-external-link-square"></i> 用户管理
								<div class="panel-tools">
									<a class="btn" id="addClick" href="#" data-toggle="tooltip"
										title="添加"><span class="glyphicon glyphicon-plus"></span>
									</a> <a class="btn btn-xs btn-link panel-collapse collapses"
										href="#"> </a> <a class="btn btn-xs btn-link panel-config"
										href="#panel-config" data-toggle="modal"> <i
										class="fa fa-wrench"></i>
									</a> <a class="btn btn-xs btn-link panel-refresh" href="#"> <i
										class="fa fa-refresh"></i>
									</a> <a class="btn btn-xs btn-link panel-expand" href="#"> <i
										class="fa fa-resize-full"></i>
									</a> <a class="btn btn-xs btn-link panel-close" href="#"> <i
										class="fa fa-times"></i>
									</a>
								</div>
							</div>
							<div class="panel-body">
								<table
									class="table table-striped table-bordered table-hover table-full-width"
									id="sample_1">
									<thead>
										<tr>
											<th>用户名</th>
											<th>工号</th>
											<th>邮箱</th>
											<th>电话</th>
											<th>性别</th>
											<th>部门</th>
											<th>职位</th>
											<th>状态</th>
											<th>操作</th>
										</tr>
									</thead>
									<tbody>
										<#list maps.users as user>
										<tr>
											<td>${user.name}</td>

											<td>${user.workNumber}</td>

											<td>${user.email}</td>
											<td>${user.phone}</td>

											<td>${user.sex}</td>

											<td>${user.department.name}</td>
											<td>${user.position}</td> <#if user.status==0>
											<td>禁止</td> </#if> <#if user.status==1>
											<td>启用</td> </#if>
											<td style="text-align: center;"><button type="button" onclick="index(${user.id})"
													data-toggle="tooltip" data-placement="bottom" title="编辑"
													class="btn btn-primary">
													<span class="glyphicon glyphicon-edit"></span>
												</button>
												<button type="button" data-toggle="tooltip"
													onclick="rm(${user.id})" data-placement="bottom" title="删除"
													style="margin-left: 10px;" class="btn btn-primary">
													<span class="glyphicon glyphicon-trash"></span>
												</button></td>
										</tr>
										</#list>
									</tbody>
								</table>
							</div>
						</div>
						<!-- end: DYNAMIC TABLE PANEL -->
					</div>
				</div>
				<!-- end: PAGE CONTENT-->
			</div>
		</div>
		<!-- end: PAGE -->
	</div>
	<!-- end: MAIN CONTAINER -->
	<!-- start: FOOTER -->
	<div class="footer clearfix">
		<div class="footer-inner">2014 &copy; clip-one by cliptheme.</div>
		<div class="footer-items">
			<span class="go-top"><i class="clip-chevron-up"></i></span>
		</div>
	</div>
	<!-- end: FOOTER -->
	<!-- start: MAIN JAVASCRIPTS -->
	<!--[if lt IE 9]>
		<script src="assets/plugins/respond.min.js"></script>
		<script src="assets/plugins/excanvas.min.js"></script>
		<script type="text/javascript" src="assets/plugins/jquery/1.10.2/jquery.min.js"></script>
		<![endif]-->
	<!--[if gte IE 9]><!-->
	<script
		src="${base.contextPath}/assets/plugins/jquery/2.0.3/jquery.min.js"></script>
	<!--<![endif]-->
	<script
		src="${base.contextPath}/assets/plugins/jquery-ui/jquery-ui-1.10.2.custom.min.js"></script>
	<script type="text/javascript"
		src="${base.contextPath}/layer-2.x/layer.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/blockUI/jquery.blockUI.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/iCheck/jquery.icheck.min.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/perfect-scrollbar/src/jquery.mousewheel.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/perfect-scrollbar/src/perfect-scrollbar.js"></script>
	<script src="${base.contextPath}/assets/plugins/less/less-1.5.0.min.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/jquery-cookie/jquery.cookie.js"></script>
	<script
		src="${base.contextPath}/assets/plugins/bootstrap-colorpalette/js/bootstrap-colorpalette.js"></script>
	<script src="${base.contextPath}/assets/js/main.js"></script>
	<!-- end: MAIN JAVASCRIPTS -->
	<!-- start: JAVASCRIPTS REQUIRED FOR THIS PAGE ONLY -->
	<script type="text/javascript"
		src="${base.contextPath}/assets/plugins/select2/select2.min.js"></script>
	<script type="text/javascript"
		src="${base.contextPath}/assets/plugins/DataTables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript"
		src="${base.contextPath}/assets/plugins/DataTables/media/js/DT_bootstrap.js"></script>
	<script src="${base.contextPath}/assets/js/table-data.js"></script>
	<!-- end: JAVASCRIPTS REQUIRED FOR THIS PAGE ONLY -->
	<script>
		$(document).ready(function() {
			Main.init();
			TableData.init();
		});
		$('#addClick').on("click", function() {
			add();
		});
		function add() {
			layer.open({
				type : 2,
				area : [ '800px', '860px' ],
				title : '添加用户',
				shadeClose : true, //点击遮罩关闭层
				content : '${base.contextPath}/user/editView?state="add"&id=0'
			});

		}
		//删除用户
		function rm(id){
			layer.confirm('确定要删除用户?', function(){
				$.ajax({
					url : "${base.contextPath}/user/rm",
					type : 'post',
					data:'id='+id,
					success : function(text) {
						window.location.reload();
					},
					error : function(jqXHR, textStatus, errorThrown) {
						if (400 == jqXHR.status || 403 == jqXHR.status
								|| 500 == jqXHR.status)
							return;
						var text = "操作失败，" + jqXHR.responseText;
						alert(text);
					}
				});
			});
		}
		//打开用户编辑窗口
		function index(id){
			layer.open({
				type : 2,
				area : [ '800px', '860px' ],
				title : '添加用户',
				shadeClose : true, //点击遮罩关闭层
				content : '${base.contextPath}/user/editView?state='+"edit"+'&id='+id
			});
		}
	</script>
</body>
<!-- end: BODY -->

</html>